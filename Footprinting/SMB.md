# SMB

## command
### how to connect
```
smbclient -N -L //10.10.10.1
smbclient //10.10.10.1/directory
```
### how to download a file
```
get cred.txt 
```
### Get status / version
```
smbstatus
```
### how to interact 
```
rpcclient -U "" 10.10.10.1
```
#### RPCclient - Enumeration
```
srvinfo
enumdomains
querydominfo
netshareenumall
netsharegetinfo files
```
User
```
enumdomusers
queryuser 0x3e6
querygroup 0x201
0x*** = user/group's rid
```
#### rid
Brute force rid 
```python
for i in $(seq 500 1100);do rpcclient -N -U "" 10.10.10.1 -c "queryuser 0x$(printf '%x\n' $i)" | grep "User Name\|user_rid\|group_rid" && echo "";done
```
user 
```  
samrdump.py 10.10.10.1
```
### Enum with smbmap
```
smbmap -H 10.10.10.1
```
### Enum with crackmapexec
```
crackmapexec smb 10.10.10.1 --shares -u '' -p ''
```
### Enum with enum4linux
```
./enum4linux-ng.py 10.10.10.1 -A
```






